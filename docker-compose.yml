version: '3.6'
services:
  client: 
    container_name: react-client
    build:
      context: ./demo-container.webclient
      dockerfile: Dockerfile
    volumes: 
      - './deme-container/webclient:/usr/src/app/client'
      - '/usr/src/app/node_modules'
    ports:
      - '3000:3000'
    environment: 
      - NODE_ENV=development
    depends_on:
      - server

  server:
    build:
      context: ./demo-container.server
      dockerfile: Dockerfile
    ports: 
      - "5000:5000"
    volumes: 
      - ./demo-container.server:/usr/src/app/server
    environment: 
      - FLASK_ENV=development
      - PORT=5000
  
  # nginx:
  #   build:
  #     context: ./nginx
  #     dockerfile: Dockerfile
  #   restart: always
  #   ports: 
  #     - 80:80
  #   depends_on: 
  #     - server
  #     - react-client